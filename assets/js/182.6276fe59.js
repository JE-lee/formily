(window.webpackJsonp=window.webpackJsonp||[]).push([[182],{646:function(n,e,r){"use strict";r.r(e),e.default="<template>\n  <Button @click=\"handleOpen\">点击打开表单</Button>\n</template>\n\n<script>\nimport { FormDrawer, FormLayout, FormItem, Input } from '@formily/view-design'\nimport { Button } from 'view-design'\nimport { createSchemaField } from '@formily/vue'\n\nconst { SchemaField } = createSchemaField({\n  components: {\n    FormItem,\n    Input,\n  },\n})\n\n// 抽屉表单组件\nconst DrawerForm = {\n  props: ['resolve', 'reject'],\n  data() {\n    const schema = {\n      type: 'object',\n      properties: {\n        aaa: {\n          type: 'string',\n          title: '输入框1',\n          required: true,\n          'x-decorator': 'FormItem',\n          'x-component': 'Input',\n        },\n        bbb: {\n          type: 'string',\n          title: '输入框2',\n          required: true,\n          'x-decorator': 'FormItem',\n          'x-component': 'Input',\n        },\n        ccc: {\n          type: 'string',\n          title: '输入框3',\n          required: true,\n          'x-decorator': 'FormItem',\n          'x-component': 'Input',\n        },\n        ddd: {\n          type: 'string',\n          title: '输入框4',\n          required: true,\n          'x-decorator': 'FormItem',\n          'x-component': 'Input',\n        },\n      },\n    }\n    return {\n      schema,\n    }\n  },\n  render(h) {\n    return (\n      <FormLayout labelCol={6} wrapperCol={10}>\n        <SchemaField schema={this.schema} />\n      </FormLayout>\n    )\n  },\n}\n\nexport default {\n  components: { Button },\n  data() {\n    return {\n      drawerProps: {\n        title: '抽屉表单',\n        okButtonProps: {\n          loading: false,\n        },\n        beforeClose: (done) => {\n          return !this.drawerProps.okButtonProps.loading\n            ? Promise.resolve\n            : Promise.reject()\n          // if (!this.drawerProps.okButtonProps.loading) {\n          //   done()\n          // }\n        },\n      },\n    }\n  },\n  methods: {\n    handleOpen() {\n      const formDrawerHandler = FormDrawer(this.drawerProps, DrawerForm)\n\n      formDrawerHandler\n        .open({\n          initialValues: {\n            aaa: '123',\n          },\n        })\n        .then((values) => {\n          this.drawerProps.okButtonProps.loading = true\n\n          setTimeout(() => {\n            this.drawerProps.okButtonProps.loading = false\n            formDrawerHandler.close()\n          }, 2000)\n        })\n        .catch((e) => {\n          console.log(e)\n        })\n    },\n  },\n}\n<\/script>\n"}}]);