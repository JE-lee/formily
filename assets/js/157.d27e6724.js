(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{621:function(n,e,o){"use strict";o.r(e),e.default="<template>\n  <FormProvider :form=\"form\">\n    <SchemaField :schema=\"schema\" />\n    <Submit @submit=\"log\">提交</Submit>\n  </FormProvider>\n</template>\n\n<script>\nimport { createForm, onFieldChange, onFieldReact } from '@formily/core'\nimport { FormProvider, createSchemaField } from '@formily/vue'\nimport {\n  Submit,\n  FormItem,\n  ArrayTable,\n  ArrayTableColumn,\n  ArrayTableAddition,\n  ArrayTableMoveDown,\n  ArrayTableMoveUp,\n  ArrayTableRemove,\n  ArrayTableIndex,\n  ArrayTableSortHandle,\n  Input,\n  Editable,\n  Switch,\n} from '@formily/view-design'\n\nconst fields = createSchemaField({\n  components: {\n    FormItem,\n    ArrayTable,\n    ArrayTableColumn,\n    ArrayTableAddition,\n    ArrayTableMoveDown,\n    ArrayTableMoveUp,\n    ArrayTableRemove,\n    ArrayTableIndex,\n    ArrayTableSortHandle,\n    Input,\n    Editable,\n    Switch,\n  },\n})\n\nexport default {\n  components: { FormProvider, Submit, ...fields },\n  data() {\n    const form = createForm({\n      effects: () => {\n        //主动联动模式\n        onFieldChange('hideFirstColumn', ['value'], (field) => {\n          field.query('array.column3').take((target) => {\n            target.visible = !field.value\n          })\n          field.query('array.*.a2').take((target) => {\n            target.visible = !field.value\n          })\n        })\n        //被动联动模式\n        onFieldReact('array.*.a2', (field) => {\n          field.visible = !field.query('.a1').get('value')\n        })\n      },\n    })\n    const schema = {\n      type: 'object',\n      properties: {\n        hideFirstColumn: {\n          type: 'boolean',\n          title: '隐藏A2',\n          'x-decorator': 'FormItem',\n          'x-component': 'Switch',\n        },\n        array: {\n          type: 'array',\n          'x-decorator': 'FormItem',\n          'x-component': 'ArrayTable',\n          items: {\n            type: 'object',\n            properties: {\n              column1: {\n                type: 'void',\n                'x-component': 'ArrayTableColumn',\n                'x-component-props': {\n                  width: 80,\n                  title: 'Index',\n                  align: 'center',\n                },\n                properties: {\n                  index: {\n                    type: 'void',\n                    'x-component': 'ArrayTableIndex',\n                  },\n                },\n              },\n              column2: {\n                type: 'void',\n                'x-component': 'ArrayTableColumn',\n                'x-component-props': { width: 100, title: '显隐->A2' },\n                properties: {\n                  a1: {\n                    type: 'string',\n                    'x-decorator': 'FormItem',\n                    'x-component': 'Switch',\n                  },\n                },\n              },\n              column3: {\n                type: 'void',\n                'x-component': 'ArrayTableColumn',\n                'x-component-props': { width: 200, title: 'A2' },\n                properties: {\n                  a2: {\n                    type: 'string',\n                    'x-decorator': 'FormItem',\n                    'x-component': 'Input',\n                  },\n                },\n              },\n              column4: {\n                type: 'void',\n                'x-component': 'ArrayTableColumn',\n                'x-component-props': { title: 'A3' },\n                properties: {\n                  a3: {\n                    type: 'string',\n                    'x-decorator': 'FormItem',\n                    'x-component': 'Input',\n                  },\n                },\n              },\n              column5: {\n                type: 'void',\n                'x-component': 'ArrayTableColumn',\n                'x-component-props': {\n                  title: 'Operations',\n                  prop: 'operations',\n                  width: 200,\n                  fixed: 'right',\n                },\n                properties: {\n                  item: {\n                    type: 'void',\n                    'x-component': 'FormItem',\n                    properties: {\n                      remove: {\n                        type: 'void',\n                        'x-component': 'ArrayTableRemove',\n                      },\n                      moveDown: {\n                        type: 'void',\n                        'x-component': 'ArrayTableMoveDown',\n                      },\n                      moveUp: {\n                        type: 'void',\n                        'x-component': 'ArrayTableMoveUp',\n                      },\n                    },\n                  },\n                },\n              },\n            },\n          },\n          properties: {\n            add: {\n              type: 'void',\n              'x-component': 'ArrayTableAddition',\n              title: '添加条目',\n            },\n          },\n        },\n      },\n    }\n    return {\n      form,\n      schema,\n    }\n  },\n  methods: {\n    log(...v) {\n      console.log(...v)\n    },\n  },\n}\n<\/script>\n"}}]);